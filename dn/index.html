<!DOCTYPE html>
<html lang="zxx" class="no-js">
<head>
	<!-- Mobile Specific Meta -->

		<script src="../js/vendor/jquery-2.2.4.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>Domains & more...</title>

	<link href="https://fonts.googleapis.com/css?family=Poppins:300,500,600,900" rel="stylesheet">
		<!--
		CSS
		============================================= -->
		<link rel="stylesheet" href="../css/linearicons.css">
		<link rel="stylesheet" href="../css/font-awesome.min.css">
		<link rel="stylesheet" href="../css/nice-select.css">
		<link rel="stylesheet" href="../css/magnific-popup.css">
		<link rel="stylesheet" href="../css/bootstrap.css">
		<link rel="stylesheet" href="../css/main.css">
	</head>
	<body>
		<div class="main-wrapper-first relative">
			<header>
				<div class="container">
					<div class="header-wrap">
						<div class="header-top d-flex justify-content-between align-items-center">
							<div class="logo">
							</div>
							<div class="main-menubar d-flex align-items-center">
								<nav class="hide">
									<a href="../index.html">Home</a>
									<a href="../transact.html">Secure Transactions</a>
									<a href="../index.html#about">About Us</a>
								</nav>
								<div class="menu-bar"><span class="lnr lnr-menu"></span></div>
							</div>
						</div>
					</div>
				</div>
			</header>


            <!-- Start Subscription Area -->
			<section class="subscription-area">
				<div class="container">


					<div id="status-msg" class="alert alert-info" role="alert">
						Howdy! Please wait while we process your request...
					</div>

					<div class="row justify-content-center" id="contact" style="display:none">
					<div class="col-lg-8">


						<div id="loading" class="single-blog">
							<div class="percentage">
										<div class="progress">
											<div class="progress-bar color-1" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100">
												Loading...
											</div>
										</div>
									</div>
							</div>



	 <form id="contactform" name="contact" class="subscription">

<div class="desc text-center">
			<h3 id="domain-title"></h3>
</div>
								  <div class="form-group">
									 <input type="email" name="email"  class="form-control" id="email" placeholder="Your Email*" required>
								  </div>

								  <div class="form-group">
									 <input type="text" name="name"  class="form-control" id="name" placeholder="Your Name">
								  </div>
								  <div class="form-group">
									 <input type="number" min="0" name="phone" id="phone"  class="form-control" placeholder="Your Phone">
								  </div>

									 <input type="text" name="domainname" id="domainname" hidden>
									 <input type="text" name="price" id="price" hidden>

								  <div class="form-group text-center">

									  <h2>
									  <del>
										<span id="price-full" class="amount"></span>
									  </del>
									  <ins>
										<span id="price-off" class="amount"></span>
									  </ins>

											</h2>
									<button id="buy" class="btn" style="background-color: #955bf9; border-color: #955bf9; color:white">
										<span>Buy Now**</span> <span class="lnr lnr-cart"></span>
										</button>
										<br>
								 </div>

									 <div class="form-group text-center">
									  -- or --
									</div>
								  <div class="form-group">



									 <input type="number" min="90" name="offer" id="offer" placeholder="Your best offer***" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Make an offer***'">


									</div>

									 <div class="form-group text-center">
										<button id="mo" class="btn" style="background-color: #f58e9a; border-color: #f58e9a; color:white">
										<span>Make Offer**</span> <span class="lnr lnr-tag"></span>
											</button>
									</div>


<br>
											*A valid email address is required
						<br>
						<br>
  										 	**A  confirmation email will be sent to your email from DAN.COM on our behalf
						<br>
						<br>
  										 	***A minimum offer of $90 is required
<br>
						<br>
							   </form>



						</div>

						<div class="col-md-4" id="info">
							<div class="single-blog">

								<ul class="unordered-list">
										<li>We process all transactions using <img class="img-fluid" src="../img/dan.png"> domain escrow service to ensure a safe buying experience.</li>
										<li>Our domain delivery time on average is 12-36 hours after payment has been confirmed</li>
										<li>To know more about the process we follow, <a href="../transact.html" target="_blank">read our detailed domain escrow overview</a></li>
										<li>Our preferred domain escrow service, DAN.com has a <a class="color:green" href="https://www.trustpilot.com/review/dan.com" target="_blank">4.5 out of 5 Trustpilot.com rating</a></li>

									</ul>

							</div>
						</div>
						</div>

				</div>
			</section>


			<section class="subscription-area">
				<div class="container">
					<div id="search" class="row justify-content-center">
						<div class="col-lg-8">

							<div class="section-title text-center">
								<p class="mb-0 mt-10">Search from 1M+ premium domain names... </p>
							</div>
						</div>


						<div class="col-lg-6">
							<div id="mc_embed_signup">
								<form novalidate action="" method="get" class="subscription relative">
									<input type="text" name="q" placeholder="Enter a domain name eg ILoveChicago.com" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter a domain name eg ILoveChicago.com'" required>
									<button class="primary-btn"><span>Search</span><span class="lnr lnr-arrow-right"></span></button>
									<div class="info"></div>
								</form>
							</div>
						</div>
					</div>

				</div>
			</section>
		</div>
		<div class="main-wrapper">



			<!-- Start footer Area -->
			<footer class="footer-area">
				<div class="container">
					<div class="footer-content d-flex flex-column align-items-center">
						<div class="footer-menu">
							<a href="../index.html">Home</a>
							<a href="../transact.html">Secure Transactions</a>
							<a href="../index.html#about">About Us</a>
						</div>
						<div style="color:#999" class="footer-social text-center">
							Powered by
							<br>
							<a href="https://chimbel.com" target="_blank">CHIMBEL</a>
							<br>
							t: +1650-2397232  a: #108, 650 Castro St, Mountain View, CA
						</div>
					</div>
				</div>
			</footer>
			<!-- End footer Area -->
		</div>



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-1944294-10"></script>
  <script>
	function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
    function(m,key,value) {
      vars[key] = value;
    });
    return vars;
  }



	async function fetchAsync (url) {
	  // await response of fetch call
	  let response = await fetch(url);
	  // only proceed once promise is resolved
	  let data = await response.json();
	  // only proceed once second promise is resolved
	  return data;
	}

	function handle_error(err) {
			console.log(err);
			document.getElementById("status-msg").innerHTML = 'Our server is down at the moment! Please try again later.'
	}

	function handle_response(response) {
			console.log(response);

			if(response.hasOwnProperty('dn')) {
				document.getElementById("status-msg").innerHTML = "The domain name <b>" + response['dn'] + '</b> is for sale, you can buy now or make an offer.'
				document.getElementById("contact").style.display = ""
				document.getElementById("loading").style.display = "none"
				document.getElementById("domainname").value = response['dn']
				document.getElementById("domain-title").innerHTML = 'Buy ' + response['dn']
				if(response.hasOwnProperty('price')) {
					document.getElementById("price").value = response['price']
					document.getElementById("price-full").innerHTML = '$' + response['price-full']
					document.getElementById("price-off").innerHTML = '  $' + response['price']
				}
				if(response.hasOwnProperty('email')) {
					document.getElementById("email").value = response['email']
				}
			} else {
				document.getElementById("loading").style.display = "none"
				document.getElementById("contact").style.display = "none"
				document.getElementById("status-msg").className = 'alert alert-warning'
				document.getElementById("status-msg").innerHTML = "We did not find any result that matches your query <b>" + response['q'] + '</b> , you can search again.'
			}
	}

var $ = jQuery;
$('#buy').on('click', function (e) {
	if (document.getElementById("email").value != "") {
			e.preventDefault();
			$.fn.save_lead();
	}
});

$('#mo').on('click', function (e) {

	if (document.getElementById("email").value != "") {

		var offer = document.getElementById("offer").value
		if (offer < 90) {
			e.preventDefault();
			alert('A minimum of $90')
		} else {
			e.preventDefault();
			$.fn.save_lead();
		}

	}
});

 $.fn.save_lead = function(){
	lead = {
			"name": document.getElementById("name").value,
			"email": document.getElementById("email").value,
			"phone": document.getElementById("phone").value,
			"domainname": document.getElementById("domainname").value,
			"price": document.getElementById("price").value,
			"offer": document.getElementById("offer").value
	}

	console.log(lead)

	//var posting = $.post( 'http://localhost:5000/offer' , lead);
	var posting = $.post( 'https://go.' +  window.location.hostname.split('.').slice(-2).join('.') + '/offer' , lead );

  // Put the results in a div
	  posting.done(function( data ) {

  		if (data['status'] == 'done') {
			document.getElementById("contactform").style.display = "none"
			document.getElementById("status-msg").className = 'alert alert-success'
			document.getElementById("info").className = 'col-md-12'
			document.getElementById("status-msg").innerHTML = '<span class="lnr lnr-checkmark-circle"></span> We have received your request, a confirmation email will be sent to you from DAN.COM to process this transaction.'
  		}

  }).fail(function() {
	  document.getElementById("status-msg").innerHTML = "Our mail server is down right now, please email us - domains@" + window.location.hostname.split('.').slice(-2).join('.')
	  document.getElementById("status-msg").className = 'alert alert-error'
	  document.getElementById("contact").style.display = "none"
  });

  }

	var params = getUrlVars();
	console.log(params)

	if(params.hasOwnProperty('q')) {
          window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		  gtag('config', 'UA-1944294-10');

		fetchAsync('https://go.' +  window.location.hostname.split('.').slice(-2).join('.') + '/dn?q=' + params['q'])
		//fetchAsync('http://localhost:5000/dn?q=' + params['q'])
				.then(data => handle_response(data))
				.catch(reason => handle_error(reason))
	}
	</script>



		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
		<script src="../js/vendor/bootstrap.min.js"></script>
		<script src="../js/jquery.nice-select.min.js"></script>
		<script src="../js/jquery.magnific-popup.min.js"></script>
		<script src="../js/main.js"></script>
	</body>
</html>
